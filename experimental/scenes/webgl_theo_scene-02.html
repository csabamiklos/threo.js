<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>three.js webgl - io blender - vertex colors</title>
		<meta charset="utf-8">
		<style type="text/css">
			body {
				color: #eee;
				font-family:Monospace;
				font-size:13px;
				text-align:center;

				background-color: #000;
				margin: 0px;
				padding: 0px;
				overflow: hidden;
			}

			#info {
				position: absolute;
				top: 0px; width: 100%;
				padding: 5px;
			}

			a {
				color: #0080ff;
			}

		</style>
	</head>
	<body>

		<div id="container"></div>
		<div id="info"><a href="http://github.com/mrdoob/three.js" target="_blank">three.js</a> webgl - io blender - vertex colors</div>

		<script type="text/javascript" src="../../build/Three.js"></script>
		
		<script type="text/javascript" src="../js/Detector.js"></script>
		<script type="text/javascript" src="../js/RequestAnimationFrame.js"></script>
		<script type="text/javascript" src="../js/Stats.js"></script>

		<script type="text/javascript">

if (!Detector.webgl) Detector.addGetWebGLMessage();

var container, stats;

var camera, scene, light, renderer;

var mesh, mesh2;

var mouseX = 0,
    mouseY = 0;

var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

init();

animate();

function init() {

    container = document.createElement('div');
    document.body.appendChild(container);

    camera = new THREE.Camera(40, window.innerWidth / window.innerHeight, 1, 10000);
    camera.position.z = 100;

    scene = new THREE.Scene();

    light = new THREE.DirectionalLight(0xffffff);
    light.position.set(1, 1, 1);
    light.position.normalize();
    scene.addLight(light);

    createScene1();
    createScene2();
    
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    container.appendChild(renderer.domElement);

    stats = new Stats();
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.top = '0px';
    container.appendChild(stats.domElement);

    document.addEventListener('mousemove', onDocumentMouseMove, false);

}

function createScene1() {
    var geometry = new Cube(2, 2, 1);

    var material = [new THREE.MeshFaceMaterial(), new THREE.MeshLambertMaterial({
        color: 0x00ffff,
        opacity: 0.9,
        // shading: THREE.FlatShading
    })];
    // geometry = new THREE.Mesh( geometry, material );
    // geometry.scale.set(25, 25, 25);
    // geometry.position.set(40, 0, 0);
    // mesh = scene.addObject( geometry );
    mesh = SceneUtils.addMesh(scene, geometry, 25, 40, 0, 0, 0, 0, 0, material);

}

function createScene2() {

  var geometry = new THREE.Geometry();

  var material = new THREE.MeshNormalMaterial({opacity: 0.5});

  mesh2 = new THREE.Mesh(new Cube( 2, 1, 5 ));

  GeometryUtils.merge(geometry, mesh2 );

  mesh2 = new THREE.Mesh(new Cube( 1, 5, 2 ));
    
  GeometryUtils.merge(geometry, mesh2 );

  mesh2 = new THREE.Mesh(new Cube( 5, 2, 1 ));
    
  GeometryUtils.merge( geometry, mesh2 );
  
  // addMesh : function ( scene, geometry, scale, x, y, z, rx, ry, rz, material ) {
  
  mesh2 = SceneUtils.addMesh(scene, geometry, 15, -40, 30, 0, 0, 0, 0, material);
    	
}

function onDocumentMouseMove(event) {

    mouseX = (event.clientX - windowHalfX);
    mouseY = (event.clientY - windowHalfY);

}

//

function animate() {

    requestAnimationFrame(animate);

    render();
    stats.update();

}

function render() {

    camera.position.x += (mouseX - camera.position.x) * 0.02;
    camera.position.y += (-mouseY - camera.position.y) * 0.02;

    if (mesh) {

        mesh.rotation.x += -0.01;
        mesh.rotation.y += -0.01;
        
    }

    if (mesh2) {
    
        mesh2.rotation.x += 0.02;
        mesh2.rotation.y += 0.03;

    }

    renderer.render(scene, camera);

}

		</script>

	</body>
</html>
